<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    
    <link href="/deps/partial/imgs/favicon.ico" type="image/x-icon" rel="icon">
    
    <title>
        
            gitment使用
        
    </title>
    <link  href="/deps/css/style.css"      type="text/css" rel="stylesheet">
    <script src="/deps/js/jquery.min.js"      type="application/javascript"></script>
    <link  href="/deps/partial/mincss/nprogress.min.css"  type="text/css" rel="stylesheet">
    <script src="/deps/js/nprogress.min.js"   type="application/javascript"></script>
    <link href="/deps/partial/mincss/animate.min.css"   type="text/css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.0/APlayer.min.css"   type="text/css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.0/APlayer.min.js"   type="application/javascript"></script>
    
        <link  href="/deps/partial/mincss/prism.min.css"      type="text/css" rel="stylesheet">
        <script src="/deps/js/prism.min.js"   type="application/javascript"></script>
        <link  href="/deps/partial/mincss/fancybox.min.css"    type="text/css" rel="stylesheet">
        <script src="/deps/js/fancybox.min.js"     type="application/javascript"></script>
        <link  href="/deps/partial/mincss/gitment.min.css"    type="text/css" rel="stylesheet">
        <script src="/deps/js/gitment.min.js"     type="application/javascript"></script>
       
    <script>
        var _hmt = _hmt || [];
        (function() {
            // 百度统计
            if('dev'==='product'){
                if('true'){
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?ae543e855bdf60532e8d24f9d53957e9";
                    var s = document.getElementsByTagName("script")[0]; 
                    s.parentNode.insertBefore(hm, s);
                }
                // 百度js推送
                if('true'){
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                    }
                    else {
                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                }
            }
			// 改变title
            window.onfocus = function () {
                if ('gitment使用'){
                    document.title = 'gitment使用';
                } else {
                    document.title = '个人博客';
                }
            };
            window.onblur = function () {
                document.title = '等死 (～ o ～)~zZ';
            };
        })();
    </script>        
</head>
    <body>
        <header class="header fixed-header">
    <div class="header-container">
        <a class="home-link" href="/">
            此夜掩目的博客
        </a>
        <ul class="right-list">
            
                <li class="list-item">
                    
                        <a href="/archives/" class="item-link">归档</a>
                    
                </li>
            
                <li class="list-item">
                    
                        <a href="/about" class="item-link">关于</a>
                    
                </li>
            
        </ul>
        <div class="menu-mask">
            <ul class="menu-list">
                
                    <li class="menu-item">
                        
                            <a href="/archives/" class="menu-link">归档</a>
                        
                    </li>
                
                    <li class="menu-item">
                        
                            <a href="/about" class="menu-link">关于</a>
                        
                    </li>
                
            </ul>
        </div>
    </div>
</header>
        <div id="article-banner">
    <h2>gitment使用</h2>
    <p class="post-date">7月2日晚上11点50分</p>
</div>
<main class="app-body flex-box">
    <article class="post-article">
        <section class="markdown-content">
            <h2 id="简短介绍"><a href="#简短介绍" class="headerlink" title="简短介绍"></a>简短介绍</h2><p>gitment是<a href="https://github.com/imsun/gitment" target="_blank" rel="noopener">imsun</a>开源的一款基于github issues的评论系统，因为不需要任何后端，所以尤为适合那些使用hexo搭建在github pages上的静态博客或项目。<br>虽然只能使用github账号，但是可以进行评论、点赞操作，而且支持markdown格式，功能比较丰富。demo例子在<a href="https://imsun.github.io/gitment/" target="_blank" rel="noopener">Gitment</a>。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>看到官网的文档，使用起来还算比较方便的，先去注册一个github的OAuth Apps，把生成的clientId和clientSecret放到gitment生成的对象里，然后再填写githubId和储存评论的repo。最后初始化生成评论的dom元素就ok了。</p>
<h2 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h2><p>目前每个页面都要进行gitment的初始化和渲染dom元素，后续作者可能会推出全局初始化。<br>我在开发的时候页面访问的是localhost:4000，但是部署后访问的是<a href="https://leepcell.xyz">https://leepcell.xyz</a> ，而我OAuth Apps中Authorization callback URL填写的是部署后的url，所以我在本地点击评论的login按钮时返回的是<a href="https://leepcell.xyz/?error=redirect_uri_mismatch&amp;error_description=The+redirect_uri+MUST+match+the+registered+callback+URL+for+this+application.&amp;error_uri=https%3A%2F%2Fdeveloper.github.com%2Fapps%2Fmanaging-oauth-apps%2Ftroubleshooting-authorization-request-errors%2F%23redirect-uri-mismatch">这一大长串的东东</a> ，看了一下大致是验证错误。<br>我明确自己配置没有问题，认为估计是当前url和验证返回url不一样导致的，于是就直接部署了。发现果然没有问题了，在此mark一下  ┐(・o・)┌ </p>

        </section>
        </br>
        <div class="article-footer">
            </br>
            <p>本文可能过时失效，若需更新，请留言</p>
            <p>本博客文章均为原创，转载请注明来源</p>
        </div>
        
    <div class="nav-container">
        
            <a class="nav-right" href="/article/blog-devops/">
                
                    尝尝自动部署的甜头
                
                <span class="nav-arrow"> →</span>
            </a>
        
        
            <a class="nav-left" href="/article/confused-july/">
                <span class="nav-arrow">← </span>
                
                    七月迷茫季
                
            </a>
        
    </div>

        
            <div id="comments"></div>
        
    </article>
    
        <aside class="catalog-container">
    <div class="toc-main">
        <strong class="toc-title">Catalog</strong>
        
            <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#简短介绍"><span class="toc-nav-text">简短介绍</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#基本使用"><span class="toc-nav-text">基本使用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#小问题"><span class="toc-nav-text">小问题</span></a></li></ol>
        
    </div>
</aside>
    
</main>

<script>(function(){
    var banner = "/deps/partial/imgs/pages/banner_girl.png";
    $('#article-banner').css({'background-image': 'url(' + banner + ')'});
    $('#article-banner').css('background-position','50% 60%');
    $('.header').removeClass('fixed-header');
})();</script>

<script>(function(){
    // gitment
    var gitmentConfig = "needal"
    if (gitmentConfig !== 'undefined') {
        var gitment = new Gitment({
            //id: "article/user-comment/",
            owner: "needal",
            repo: "hexo_blog",
            oauth: {client_id: "6de9f8a023dba13d8ab7", client_secret: "bb250d74da3906094ed23569090954df00e66de0"},
            theme: {render(state, instance){const container = document.createElement('div');container.lang="en-US";container.className='gitment-container gitment-root-container';container.appendChild(instance.renderHeader(state, instance));container.appendChild(instance.renderEditor(state, instance));container.appendChild(instance.renderComments(state, instance));container.appendChild(instance.renderFooter(state, instance));return container;}}
        })
        gitment.render(document.getElementById('comments'));
    }
    // fancybox
    $.fancybox.defaults.wheel = false;
    $.fancybox.defaults.infobar = false;
    $.fancybox.defaults.buttons = [
        'fullScreen',
        // 'thumbs',
        'zoom',
        'close'
    ];
})();</script>
        <div class="scroll-top">
    <span class="arrow-icon"></span>
</div>
        <footer class="app-footer">
    <p class="copyright" align="center">
        &copy; 2018 created by <a onClick='window.open("https://github.com/needal")'><strong>cym</strong></a> powered by <a onClick='window.open("https://hexo.io/zh-cn/docs")'><strong>hexo</strong><a/>
    </p>
</footer>

<script src="/deps/js/function.min.js" type="application/javascript"></script>
<script type="application/javascript">
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};
    ga.l=+new Date;
    ga('create', "", 'auto');
    ga('send', 'pageview');
    // 社会核心价值观
    var a_idx = 0;
    $(".markdown-content").click(function(e) {
        var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正", "法治", "爱国", "敬业", "诚信", "友善");
        var $i = $("<span/>").text(a[a_idx]);
        a_idx = (a_idx + 1) % a.length;
        var x = e.pageX,
        y = e.pageY;
        $i.css({
            "z-index": 15555569,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": "#FF0000"
        });
        $("body").append($i);
        $i.animate({
            "top": y - 180,
            "opacity": 0
        },
        1500,
        function() {
            $i.remove()
        })
    });
</script>
<script async src="https://www.google-analytics.com/analytics.js" type="application/javascript"></script>
    </body>
</html>